# Case 2.2: Regression Detection Process
# Process for testing regression detection scenarios

process:
  name: regression_testing
  initial_stage: basic
  final_stage: completed

  stages:
    basic:
      gates:
        advance_to_intermediate:
          target_stage: intermediate
          locks:
          - type: exists
            property_path: "id"
          - type: exists
            property_path: "status"
          - type: equals
            property_path: "status"
            expected_value: "active"

      fields:
      - id
      - status

    intermediate:
      gates:
        advance_to_advanced:
          target_stage: advanced
          locks:
          - type: exists
            property_path: "processed_data.validation_passed"
          - type: equals
            property_path: "processed_data.validation_passed"
            expected_value: true
          - type: exists
            property_path: "processed_data.processing_date"

      fields:
      - id
      - status
      - processed_data
      - processed_data.validation_passed
      - processed_data.processing_date

    advanced:
      gates:
        complete:
          target_stage: completed
          locks:
          - type: exists
            property_path: "advanced_features.feature_a_enabled"
          - type: exists
            property_path: "advanced_features.feature_b_configured"
          - type: greater_than
            property_path: "advanced_features.configuration_score"
            expected_value: 80

      fields:
      - id
      - status
      - processed_data
      - advanced_features
      - advanced_features.feature_a_enabled
      - advanced_features.feature_b_configured
      - advanced_features.configuration_score

    completed:
      fields:
      - id
      - status
      - processed_data
      - advanced_features
      - completion_metadata

  allow_stage_skipping: false
  regression_detection: true

  metadata:
    description: "Process for testing regression detection"
    version: "1.0.0"
    test_case: "regression_detection"
