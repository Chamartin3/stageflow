# User Onboarding Process Template
# User registration, verification, and profile setup workflow

process:
  name: user_onboarding
  description: "User onboarding workflow"
  initial_stage: registration
  final_stage: active

  stages:
    registration:
      name: "Registration"
      description: "User registration stage"
      fields:
        - email
        - password
      expected_actions:
        - name: "verify_email"
          description: "Verify email address ownership"
          instructions:
            - "Check inbox for verification email"
            - "Click the verification link"
          related_properties:
            - email
            - email_verified_at
      gates:
        email_verified:
          target_stage: profile_setup
          locks:
            - exists: email
            - exists: email_verified_at

    profile_setup:
      name: "Profile Setup"
      description: "Complete user profile"
      fields:
        - email
        - password
        - email_verified_at
        - profile.first_name
        - profile.last_name
      expected_actions:
        - name: "complete_profile"
          description: "Fill in profile information"
          instructions:
            - "Enter your first name"
            - "Enter your last name"
          related_properties:
            - profile.first_name
            - profile.last_name
      gates:
        profile_complete:
          target_stage: active
          locks:
            - exists: profile.first_name
            - exists: profile.last_name

    active:
      name: "Active User"
      description: "Active user account"
      fields:
        - email
        - profile.first_name
        - profile.last_name
        - activated_at
