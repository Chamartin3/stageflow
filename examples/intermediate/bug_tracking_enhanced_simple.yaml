process:
  name: "Bug Tracking (Enhanced Actions)"
  initial_stage: triage
  final_stage: closed

  stages:
    triage:
      expected_actions:
      - name: "categorize_bug"
        description: "Categorize and prioritize the bug report"
        instructions:
        - "Set bug type (crash, performance, ui, data, security)"
        - "Assign severity level (critical, high, medium, low)"
        - "Verify this is a bug and not a feature request"
        related_properties:
        - "bug_type"
        - "severity"

      gates:
        ready_for_investigation:
          target_stage: investigation
          locks:
          - type: exists
            property_path: "bug_type"
            error_message: "Bug type must be specified"
          - type: exists
            property_path: "severity"
            error_message: "Severity level must be set"

      fields:
      - bug_type
      - severity

    investigation:
      expected_actions:
      - name: "document_bug_details"
        description: "Document complete bug information for reproduction"
        instructions:
        - "Write clear description of what the bug is"
        - "List exact steps to reproduce the issue"
        - "Document what should happen (expected behavior)"
        - "Document what actually happens (actual behavior)"
        related_properties:
        - "description"
        - "steps_to_reproduce"

      gates:
        documentation_complete:
          target_stage: closed
          locks:
          - type: exists
            property_path: "description"
            error_message: "Bug description is required"
          - type: exists
            property_path: "steps_to_reproduce"
            error_message: "Steps to reproduce must be documented"

      fields:
      - bug_type
      - severity
      - description
      - steps_to_reproduce

    closed:
      fields:
      - bug_type
      - severity
